<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>自定义指令</title>
    <script src="../vue.js"></script>
</head>

<body>
    <div id="box">
        <p v-colora>{{ msg }}</p>
        <input type="text" v-focus>
    </div>
</body>

</html>
<script src="../jquery-3.3.1.min.js"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
<script>
    var vm = new Vue({
        el: "#box",
        data: {
            msg: "自定义指令"
        },
        methods: {
        },
        directives: {
            qfocus: {
                inserted: function (el) {
                    // 聚焦元素
                    el.focus();
                }
            },
            qcolor: {
                bind: function (el) {
                    el.style.color = "red";
                }
            }
        }
    })

    // Vue.directive("color",{
    //     bind: function(el){
    //         el.style.color = "red";
    //     }
    // });

    // 自定义指令获取焦点
    // 使用Vue.pierctive()定义全局指令   参数一：指令名称    参数二：与指令相关的钩子函数
    // Vue.directive('focus', {
    //     bind: function () {    //每当指令绑定到元素上的时候，会立即执行bind函数，只执行一次
    //         //在每个函数中，第一个参数永远都是el，表示被绑定了的那个元素，这个el参数，是一个原声js对象
    //     },
    //     inserted: function (el) {  //元素插入到dom中时执行inserted函数
    //         el.focus();
    //     },
    //     updated: function (el) {  //当Vnode更新时会执行updated函数，会执行多次

    //     }
    // })

    Vue.directive('focus', {
        // 当被绑定的元素插入到 DOM 中时……
        inserted: function (el) {
            // 聚焦元素
            el.focus()
        }
    })
    Vue.directive('colora', {
        bind: function (el) {
            // 聚焦元素
            el.style.color = "red";
        }
    })




    // Vue.directive('autoFcs', {
    //     // 钩子函数，被绑定元素插入父节点时调用 (父节点存在即可调用，不必存在于 document 中)。
    //     inserted(el) {
    //         el.focus();
    //         console.log('inserted');
    //     },
    //     // 只调用一次，指令第一次绑定到元素时调用，用这个钩子函数可以定义一个在绑定时执行一次的初始化动作。
    //     bind(el) {
    //         console.log('bind');
    //     },
    //     // 所在组件的 VNode 更新时调用，但是可能发生在其孩子的 VNode 更新之前。
    //     // 指令的值可能发生了改变也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 
    //     update(el) {
    //         console.log('update');
    //     },
    //     // 所在组件的 VNode 及其孩子的 VNode 全部更新时调用。
    //     componentUpdated(el) {
    //         console.log('componentUpdated');
    //     },
    //     // 只调用一次，指令与元素解绑时调用。
    //     unbind(el) {
    //         console.log('unbind');
    //     }
    // })
</script>